# Информационное представление
## DB Geo
1. <b>DB Geo</b> - БД Geo Service, которая хранит информацию о гео-позиции клиента, тренировочных спотах и местах проведения соревнований.

![DB Geo](https://github.com/Lana8888/trans-sport/blob/main/informational-view_db_geo.png)

Состоит из таблиц geo_spot и geo_client.

1.1. Таблица geo_spot - содержит гео-объекты: площадки для тренировок, стадион, спот, начало трека и т.п.
Содержит атрибуты:
* ID_geo - int64 - общий идентификатор гео-объекта (область, точка); NOT NULL
* ID_spot - int64 - идентификатор спота; может быть NULL
* g_datetime - timestamp - дата/время создания записи; NOT NULL
* g_location_obj - geography (Object) - гео-объект (область, регион, полигон); может быть NULL
* g_location_pnt - geography (Point) - гео-точка (координаты); может быть NULL
* g_description - string - описание гео-объекта; может быть NULL

1.2. Таблица geo_client - гео-позиция клиента. Таблица чистится по мере устаревания информации (например, раз в час или чаще, в зависимости от частоты запросов и имеющегося места для хранения информации).
Содержит атрибуты:
* ID_geo - int64 - идентификатор записи; NOT NULL
* ID_client - int64 - идентификатор клиента; NOT NULL
* g_datetime - timestamp - дата/время создания записи; NOT NULL
* g_location - geography (Point) - гео-позиция клиента в момент выполнения запроса на определение; NOT NULL

## DB Social
2. <b>DB Social</b> - БД Social Service, хранит информацию о социальных группах, клиентах, входящих в группу, привязке социальных групп к спотам и местам проведения соревнований.

![DB Geo](https://github.com/Lana8888/trans-sport/blob/main/informational-view_db_social.png)

Состоит из таблицы soc_groups.

2.1. Таблица soc_groups содержит атрибуты:
* ID_group - int64 - идентификатор записи; NOT NULL
* soc_datetime - timestamp - дата/время создания записи; NOT NULL
* soc_grpname - string - наименование соц. группы; NOT NULL
* soc_description - string - описание группы; может быть NULL
* soc_grptype - string, enum - тип соц. группы (для соревнований, для общения по виду спорта, группа пользователей спота и т.п.); NOT NULL
* soc_client_ID - [int64] - массив идентификаторов клиентов, входящих в группу; NOT NULL
* soc_spot_ID - [int64] - массив идентификаторов спотов, привязанных к группе; может быть NULL

## DB Training
3. <b>DB Training</b> - БД Training Service, хранит информацию о тренировочных планах и рекомендациях тренировок для клиента.

<b>Cashe Training</b> - кэш БД для хранения актуальной информации, к которой нужен быстрый доступ. Например, тренировочные планы в стадии выполнения или информация за последнюю неделю/ месяц / квартал (необходимо установить глубину хранения в процессе тестовой эксплуатации).

Выполненные планы или планы, созданные давно, отправляются в архив и удаляются после истечения срока хранения (срок определяется в ТЗ).

![DB Geo](https://github.com/Lana8888/trans-sport/blob/main/informational-view_db_training.png)

Состоит из таблицы train_plan.

3.1. Таблица train_plan содержит атрибуты:
* ID_train - int64 - идентификатор записи; NOT NULL
* train_datetime - timestamp - дата/время создания записи; NOT NULL
* train_description - string - описание тренировочного плана/рекомендации; NOT NULL
* train_plan - string (YAML) - состав тренировочного плана/рекомендации (может содержать в установленном формате структуры виды упражнений, количество подходов/повторений, длительность упражнения, общие рекомендации по режиму тренировки и т.п.; NOT NULL
* train_startplan - date - дата начала тренировочного плана; может быть NULL
* train_endplan - date - дата окончания тренировочного плана; может быть NULL
* train_client_ID - int64 - идентификатор клиента, к которому относится данный план/рекомендация; NOT NULL

## DB Statistics 
4. <b>DB Statistics</b> - БД Statistics Service, хранит информацию о статистике тренировок, метриках пользователя, победах, наградах, достижении тренировочных целей.

<b>Cache Statistics</b> - кэш БД Statistics, используется для оперативного доступа к тренировочной статистике.

Статистика имеет историческую глубину хранения, устанавливаемую в ТЗ. Неактуальная и устаревшая статистика архивируется, затем удаляется.

![DB Geo](https://github.com/Lana8888/trans-sport/blob/main/informational-view_db_statistics.png)

Состоит из таблиц stat_train, stat_competitions, stat_metrics, stat_goals.

4.1. Таблица stat_train предназначена для хранения статистики тренировок. Содержит атрибуты:
* ; NOT NULL
