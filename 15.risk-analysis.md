# Анализ рисков и компромиссов архитектуры
## Риски
### 1. Использование облачных решений
Использование облачных решений в качестве инфраструктурной и программной платформы.

#### <i>1.1. Факторы принятия решения</i>
Распределённая архитектура системы с большим охватом стран и регионов не предполагает жёсткой централизации. 
Скорость захвата рынка диктует выбор самого быстро реализуемого инфраструктурного решения. Облачные сервисы и компоненты в этом случае быстрее "поднять" и настроить, чем закупить физическое железо, организовать серверные помещения и нанять персонал для обслуживания hardware.

#### <i>1.2. Преимущества</i>
1. Быстрота разворачивания и настройки.
2. Минимизация персонала.
3. Возможность реализации гибкой страновой/региональной политики размещения основных узлов системы. Возможность использования облачных вендоров непосредственно в странах/регионах присутствия.
4. Минимизация платы за ресурсы (платим столько, сколько используем).
5. Высокая скорость и низкая стоимость масштабирования инфраструктуры.
6. Независимость от одной-двух компаний-поставщиков физического оборудования и ПО.

#### <i>1.3. Недостатки</i>
1. Зависимость от поставщиков облачных ресурсов.
2. Риски хищения, слива данных из облака по вине поставщиков или при наличии незакрытых уязвимостей.
3. Сложности интеграции между разными облачными платформами.

### 2. Использование Брокера сообщений (Message Broker, MB)
#### <i>2.1. Факторы принятия решения</i>
Для информационного обмена между сервисами необходим универсальный интеграционный механизм, обеспечивающий единообразное подключение сервисов и возможности сохранения интеграции при отказе отдельных экземпляров сервиса (очеред сообщений сохраняется и может быть вычитана другим поднятым экземпляром).
Обоснование использования MB приведено в [ADR](https://github.com/Lana8888/trans-sport/blob/main/11.02-ADR-internal-integration.md).

#### <i>2.2. Преимущества</i>
1. Отказоустойчивость, возможность резервирования очередей сообщений.
2. Доступные механизмы подключения к MB для большинства сервисов.
3. Высокая производительность (за счёт очереди не забивается канал обращения к самому сервису).
4. Универсальность.

#### <i>2.3. Недостатки</i>
1. Централизованные MB - типовая точка критического отказа. Если "упадёт" брокер, упадёт вся система (решение - MB failover).
2. "Узкое горло", влияющее на latency отклика сервисов (MB - менее быстродейственен, чем, например, API).
3. Необходимость синхронизации между узлами/плечами MB (решение - синхронизация в самое малонагруженное время).

## Компромиссы
### 1. Наименование компромисса
#### <i>1.1. Факторы принятия решения</i>
текст

#### <i>1.2. Преимущества</i>
1. пджф

#### <i>1.3. Недостатки</i>
1. пджф

### 2. Наименование компромисса
#### <i>2.1. Факторы принятия решения</i>
текст

#### <i>2.2. Преимущества</i>
1. пджф

#### <i>2.3. Недостатки</i>
1. пджф

