# Инфраструктура

## 1. Основные параметры инфраструктуры
### 1.1. Платформенная реализация: Облако

Развертывание и работа всех элементов приложений на основе систем облачных вычислений полностью осуществляется в облаке.

Преимущества:
- минимизания затрат на оборудование и обслуживание железа.

Недостатки:
- зависимость от поставщика услуг (диверсифицироваться по разным поставщикам и предусмотреть failover-сценарии).

### 1.2. Модель облачных вычислительных ресурсов: PaaS + SaaS

Использование готовых платформ для разработки, развёртывания и работы сервисов (PaaS). Использование готового ПО для СУБД, мониторинга, логирования, управления информационной безопасностью, оркестратора, брокера сообщений (SaaS).

Преимущества:
- минимизация затрат на приобретение и обслуживание унифицированного и общеупотребимого ПО (такого как СУБД и сервисы мониторинга, логирования, управления ИБ, оркестратор, брокер сообщений).

Недостатки:
- зависимость от поставщика услуг (нужна диверсификация по поставщикам и failover-сценарии).

### 1.3. Меры минимизации рисков

1) Использовать 3-4 разных провайдера по всему миру. Провайдеры стран присутствия компании там, где это возможно.

2) Определить, какие платформы будут файловерами друг для друга. Использовать страновую и региональную переключаемую взаимостраховку при отказе. 

## 2. Диаграмма инфраструктуры 

![Картинка](https://github.com/Lana8888/trans-sport/blob/main/infrastructure-view.png)

1. <b>Region/Country - 1</b> - типовая инфраструктура для каждого региона/страны. Может масштабироваться на новые регионы/страны копированием. 
2. <b>Message Brokek + MB Storage</b> - диспетчер сообщений и хранилище для него на базе готового облачного сервиса/ приложения.
3. <b>Load Balancer App</b> - балансировщики нагрузки. Отдельные для прикладных сервисов и гео-сервиса. Реализуется на базе готового облачного сервиса.
4. <b>App Server</b> - платформенное облачное решение для размещения прикладных сервисов: Social Service, Training Service, Statistics Service, Target Service, Clients Service (interlayer).
5. <b>Database App</b> - прикладное облачное решение (готовые облачные СУБД) для размещения БД прикладных сервисов: DB Social, DB Training/ Cache Training, DB Statistics/ Cache Statistics, DB Target, DB Clients (interlayer)/ Data Vault Clients.

Для каждой пары App Server + Database App предусмотрены файловеры внутри инфраструктурного контура региона/ страны. Таких пар может быть несколько, исходя из нагрузки на сервисы. Также возможно перераспределение прикладных сервисов по разным серверам/СУБД для обеспечения отказоустойчивости и приемлемого быстродействия. Синхронизация выполняется с частотой в соответствии с требованиями ТЗ и во времена наиболее низкой нагрузки.

6. <b>Geo Server</b> - обособленное платформенное облачное решение для размещения прикладного гео-сервиса как наиболее критичного и высоконагруженного.
7. <b>Geo DB App</b> - обособленное прикладное облачное решение (готовые облачные СУБД) для размещения БД гео-сервиса как наиболее критичного и высоконагруженного.

Аналогично, пары Geo Server + Geo DB App выполняют роль файловера друг для друга и могут быть размножены необходимое количество раз.

8. <b>Logger App</b> - служебный сервис логирования для всех сервисов а базе готового облачного сервиса/ приложения. Их может быть несколько, с разделением областей ответственности, при необходимости.
9. <b>Monitoring App</b> - служебный сервис мониторинга для всех сервисов а базе готового облачного сервиса/ приложения. Их может быть несколько, с разделением областей ответственности, при необходимости.
10. <b>Region/Country - 2 / Failover</b> - инфраструктура для региона/ страны, аналогичная п. 1. Такие инфраструктуры служат файловерами друг для друга. Могут быть реализованы как функциональные инфраструктуры (то есть выполняющие все прикладные и сервисные функции в соответствии с обычной работой системы в целом), так и исключительно выполняющие роль файловеров, если это обусловлено степенью нагрузки.
