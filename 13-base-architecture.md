# Базовая архитектура
![Базовая архитектура приложений/ сервисов](https://github.com/Lana8888/trans-sport/blob/main/base-arch-2.png)

## Компоненты базовой архитектуры  
### Сервисы  
1. <b>User Front (Browser, Mobile)</b> - пользовательский фронт-сервис для выдачи контента, поставляемого другими сервисами. Возможно, нужна разработка web-версии и мобильной версии приложения.  
2. <b>Geo Service</b> - сервис определения гео-локации, связь пользователей с гео-параметрами.  
3. <b>Social Service</b> - сервис для управления социальными группами (создание групп по интересам, поиск пользователей по схожим интересам, добавление друзей).  
4. <b>Training Service</b> - сервис для составления тренировок, выдачи рекомендаций по тренировкам, учёта пользовательского инвентаря. 
5. <b>Statistics Service</b> - сервис для сбора и обработки статистики (тренировки, метрики пользователя, победы, награды, достижение тренировочных целей).  
6. <b>Target Service</b> - сервис для таргетирования рекомендаций (новости, покупки) и промо-акций.  
7. <b>Clients Service (interlayer)</b> - сервис управления клиентскими данными (регистрация пользователя, авторизация, хранение данных о пользователях). Реализует  добавление новых фичей в БД клиентов, которые позволят идентифицировать виды спорта, снаряжение пользователя, его предпочтения и персональные настройки приватности. Также реализует требуемые функции и интеграции, обогащается информацией от существующего Clients Service (existing), но не заменяет его, а дополняет, выполняя роль "прослойки" между существующим Clients Service (existing) и другими сервисами разрабатываемой системы. 
8.  <b>Clients Service (existing)</b> - существующий сервис управления клиентскими данными.  
9.  <b>Sport Service (1-M)</b> - существующие сервисы/ приложения для различных видов спорта.  
10. <b>Products Service</b> - существующий сервис продуктов компании.  
11. <b>Buying Service (1-N)</b> - существующие сервисы/ приложения для покупок.  

### БД  
1. <b>DB Geo</b> - БД Geo Service, которая хранит информацию о гео-позиции клиента, тренировочных спотах и местах проведения соревнований.  
2. <b>DB Social</b> - БД Social Service, хранит информацию о социальных группах, клиентах, входящих в группу, привязке социальных групп к спотам и местам проведения соревнований.   
3. <b>DB Training</b> - БД Training Service, хранит информацию о тренировочных планах и рекомендациях тренировок для клиента.  
4. <b>Cache Training</b> - кэш DB Training, для оперативного доступа к информации о тренировочных планах, тренировках и рекомендациях по тренировкам. Собирается из DB Training и хранит информацию за последнюю неделю/ месяц / квартал (необходимо установить глубину хранения в процессе тестовой эксплуатации).   
5. <b>DB Statistics</b> - БД Statistics Service, хранит информацию о статистике тренировок, метриках пользователя, победах, наградах, достижении тренировочных целей.  
6. <b>Cache Statistics</b> - кэш БД Statistics, используется для оперативного доступа к тренировочной статистике.  
7. <b>DB Target</b> - БД Target Service, хранит информацию о таргет-предложениях для конкретных пользователей, регионов, видов спорта, инвентаря, одежды. Хранит информацию за последнюю неделю/ месяц / квартал (необходимо установить глубину хранения в процессе тестовой эксплуатации).  
8. <b>DB Clients (interlayer)</b> - БД Clients Service (existing), хранит информацию о клиентах в рамках новых фичей, реализуемых системой. Синхронизируется с существующей БД клиентов DB Clients (existing).  
9. <b>Data Vault Clients</b> - хранилище Data Vault, используемое для агрегации данных из различных БД клиентов, принадлежащих существующим сервисам Clients Service. Также может использоваться для реализации связи между клиентом, его экипировкой, тренировками, статистикой, покупками и т.п.  
10. <b>DB Clients (existing)</b> БД Clients Service (interlayer), хранит информацию о клиентах в удобной для приложения форме. Хранит оперативные витрины, собранные на основе данных из Data Vault Clients.
11. <b>DB Adapter</b> - адаптеры БД, необходимые по причине того, что разные экземпляры сервисов могут использовать различные СУБД, например, в зависимости от выгодности использования инфраструктурных сервисов в той или иной стране. 

### Интеграции  
1. <b>Geo API</b> - API сервиса Geo Service для получения информации о гео-позиции разными сервисами, взаимодействующими с ним.    
2. <b>Message Broker</b> - брокер сообщений, для обмена сообщениями между интегрируемыми сервисами.

### Информационная безопасность    
1. <b>SSL/TLS</b> - криптографические протоколы, обеспечивающие защищенную передачу данных в сети.  
2. <b>AuthR/AuthN</b> - компонент авторизации/ аутентификации для проверки прав доступа к сервисам.  

### Логирование и мониторинг  
1. <b>Logger (Geo)</b> -  сервис логирования для Geo Service. Используется отдельный компонент, т.к. Geo Service - высоконагруженный, и к нему обращаются другие сервисы, его работа критична для бизнес-сценариев. 
2. <b>Monitoring (Geo)</b> - сервис мониторинга для Geo Service. Аналогично, используется отдельный компонент.  
3. <b>Logger (Main)</b> - сервис логирования для всех остальных сервисов.  
4. <b>Monitoring (Main)</b> - сервис мониторинга для остальных сервисов.  
5. <b>Logger (MB)</b> - сервис логирования для Message Broker. Используется отдельный, т.к. компонент MB - высоконагруженный и обслуживает множество других сервисов.  
6. <b>Monitoring (MB)</b> - сервис мониторинга для Message Broker. Аналогично, используется отдельный компонент.  
8. <b>Security Logger</b> - сервис логирования и аудита событий информационной безопасности.  
